(this.webpackJsonpbooks2read=this.webpackJsonpbooks2read||[]).push([[0],{26:function(e,t,o){},33:function(e,t,o){},34:function(e,t,o){"use strict";o.r(t);var n=o(1),s=o(20),c=o.n(s),a=(o(26),o(7)),i=o(11),r=o(12),l=o(14),h=o(13),u=o(2),d=o(8),b=o(0),j=function(e){var t=e.book,o=t.imageLinks?t.imageLinks.thumbnail:"";return Object(b.jsxs)("div",{className:"book",children:[Object(b.jsxs)("div",{className:"book-top",children:[Object(b.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(o,")")}}),Object(b.jsx)("div",{className:"book-shelf-changer",children:Object(b.jsxs)("select",{value:t.shelf||"none",onChange:function(o){var n=o.target.value;e.updateShelf(t,n)},children:[Object(b.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(b.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(b.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(b.jsx)("option",{value:"read",children:"Read"}),Object(b.jsx)("option",{value:"none",children:"None"})]})})]}),Object(b.jsx)("div",{className:"book-title",children:t.title}),Object(b.jsx)("div",{className:"book-authors",children:t.authors?t.authors.join(", "):""})]})},f="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:k},O=function(){return fetch("".concat(f,"/books"),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.books}))},x=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(a.a)(Object(a.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},m=function(e){Object(l.a)(o,e);var t=Object(h.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={books:[],searchText:""},n.handleTextInput=function(e){var t=e.target.value;n.setState({searchText:t||""}),clearTimeout(n.typingTimeout),n.typingTimeout=setTimeout((function(){t?n.searchBooks(t):n.cleanBookList()}),1e3)},n.searchBooks=function(e){var t,o=[];(t=e,fetch("".concat(f,"/search"),{method:"POST",headers:Object(a.a)(Object(a.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){Array.isArray(e)&&e.length>0&&e.forEach((function(e){n.props.books.forEach((function(t){e.id===t.id&&(e.shelf=t.shelf)})),o.push(e)}))})).then((function(){n.setState({books:o})}))},n.cleanBookList=function(){n.setState({books:[]})},n.updateShelf=function(e,t){n.setState((function(o){return{books:o.books.map((function(o){return o.id===e.id?Object(a.a)(Object(a.a)({},o),{},{shelf:t}):o}))}})),x(e,t)},n.typingTimeout=null,n}return Object(r.a)(o,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"search-books",children:[Object(b.jsxs)("div",{className:"search-books-bar",children:[Object(b.jsx)(d.b,{to:"/books2read",children:Object(b.jsx)("button",{className:"close-search",children:"Close"})}),Object(b.jsx)("div",{className:"search-books-input-wrapper",children:Object(b.jsx)("input",{type:"text",placeholder:"Search by title or author",value:this.state.searchText,onChange:this.handleTextInput})})]}),Object(b.jsx)("div",{className:"search-books-results",children:Object(b.jsx)("ol",{className:"books-grid",children:this.state.books.map((function(t){return Object(b.jsx)("li",{children:Object(b.jsx)(j,{book:t,updateShelf:e.updateShelf})},t.id)}))})})]})}}]),o}(n.Component),v=function(e){var t=e.shelf,o=(0,e.filterBooks)(t.id),n=function(t,o){e.updateShelf(t,o)};return Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:t.title}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:o.map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(j,{book:e,updateShelf:n})},e.id)}))})})]})},y=function(e){return Object(b.jsxs)("div",{className:"list-books",children:[Object(b.jsx)("div",{className:"list-books-title",children:Object(b.jsx)("h1",{children:"MyReads"})}),Object(b.jsx)("div",{className:"list-books-content",children:Object(b.jsx)("div",{children:[{title:"Currently Reading",id:"currentlyReading"},{title:"Want to Read",id:"wantToRead"},{title:"Read",id:"read"}].map((function(t){return Object(b.jsx)(v,{shelf:t,filterBooks:e.filterByBookshelf,updateShelf:e.updateShelf},t.id)}))})}),Object(b.jsx)(d.b,{to:"/books2read/search",className:"open-search",children:Object(b.jsx)("button",{children:"Add a book"})})]})},g=(o(33),function(e){Object(l.a)(o,e);var t=Object(h.a)(o);function o(){var e;Object(i.a)(this,o);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={books:[]},e.componentDidMount=function(){console.log("component did mount"),O().then((function(t){e.setState({books:t})}))},e.filterByBookshelf=function(t){return e.state.books.filter((function(e){return e.shelf===t}))},e.updateShelf=function(t,o){e.setState((function(e){return{books:e.books.map((function(e){return e.id===t.id?Object(a.a)(Object(a.a)({},e),{},{shelf:o}):e}))}})),x(t,o)},e}return Object(r.a)(o,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(u.a,{exact:!0,path:"/books2read",component:function(){return Object(b.jsx)(y,{filterByBookshelf:e.filterByBookshelf,updateShelf:e.updateShelf})}}),Object(b.jsx)(u.a,{path:"/books2read/search",component:function(){return Object(b.jsx)(m,{books:e.state.books})}})]})}}]),o}(n.Component));c.a.render(Object(b.jsx)(d.a,{children:Object(b.jsx)(g,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.09ab585e.chunk.js.map